<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{fragments/layout}">
<head>
    <title>User Messages</title>
</head>
    <body>
        <div layout:fragment="content" th:remove="tag">

            <div class="row">

                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a th:href="@{/user/}">User</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Messages</li>
                    </ol>
                </nav>

                <div th:replace="fragments/user-menu.html
                    :: userMenu('/user/messages', ${messageCount})">
                </div>

                <div class="col-md-10">
                    <table class="table">
                        <caption>Your messages</caption>
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Summary</th>
                            <th scope="col">Date Sent</th>
                            <th scope="col">Read</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${messages.empty}">
                            <td colspan="2"> You have no messages </td>
                        </tr>
                        <tr th:each="m : ${messages}">
                            <td><a th:href="@{/users/messages/view/{id}(id=${m.id})}"><span th:text="View"> # </span></a></td>
                            <td><span th:text="${#strings.abbreviate(m.text,40)}"> Text </span></td>
                            <td><span th:text="${m.sentDate}"> Date Sent </span></td>
                            <td>
                                <span th:if="${m.read}"> <i class="fas fa-check"></i> </span>
                                <span th:unless="${m.read}"> <i class="fas fa-times"></i> </span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--a class="btn btn-primary" th:href="@{/user/messages/new}">New Message</a-->
                </div>

            </div>
        </div>
    </body>
</html>
